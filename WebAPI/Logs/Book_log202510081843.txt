2025-10-08 18:43:21.260 +07:00 [INF] Request starting HTTP/2 GET https://localhost:7021/api/Books/get-all-books?pageNumber=1&pageSize=100 - null null
2025-10-08 18:43:21.265 +07:00 [INF] Executing endpoint 'WebAPI.Controllers.BooksController.GetAll (WebAPI)'
2025-10-08 18:43:21.266 +07:00 [INF] Route matched with {action = "GetAll", controller = "Books"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GetAll(System.String, System.String, System.String, Boolean, Int32, Int32) on controller WebAPI.Controllers.BooksController (WebAPI).
2025-10-08 18:43:21.270 +07:00 [INF] GetAll Book Action method was invoked
2025-10-08 18:43:21.270 +07:00 [WRN] This is a warning log
2025-10-08 18:43:21.271 +07:00 [ERR] This is a error log
2025-10-08 18:43:21.279 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Title], [t].[Description], [t].[IsRead], CASE
    WHEN [t].[IsRead] = CAST(1 AS bit) THEN [t].[DateRead]
    ELSE NULL
END, CASE
    WHEN [t].[IsRead] = CAST(1 AS bit) THEN [t].[Rate]
    ELSE NULL
END, [t].[Genre], [t].[CoverUrl], [p].[Name], [p].[Id], [t0].[FullName], [t0].[Id], [t0].[Id0]
FROM (
    SELECT [b].[Id], [b].[CoverUrl], [b].[DateRead], [b].[Description], [b].[Genre], [b].[IsRead], [b].[PublisherID], [b].[Rate], [b].[Title]
    FROM [Books] AS [b]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Publishers] AS [p] ON [t].[PublisherID] = [p].[Id]
LEFT JOIN (
    SELECT [a].[FullName], [b0].[Id], [a].[Id] AS [Id0], [b0].[BookId]
    FROM [Books_Authors] AS [b0]
    INNER JOIN [Authors] AS [a] ON [b0].[AuthorId] = [a].[Id]
) AS [t0] ON [t].[Id] = [t0].[BookId]
ORDER BY [t].[Id], [p].[Id], [t0].[Id]
2025-10-08 18:43:21.282 +07:00 [INF] Finished GetAllBook request with data [{"Id":6,"Title":"stringstri","Description":"string","IsRead":true,"DateRead":"2025-10-08T11:42:11.732","Rate":0,"Genre":"string","CoverUrl":"string","DateAdded":"0001-01-01T00:00:00","PublisherName":"Penguin Random House","AuthorNames":["J.K. Rowling"]},{"Id":7,"Title":"stringstri","Description":"string","IsRead":true,"DateRead":"2025-09-25T06:02:58","Rate":1,"Genre":"string","CoverUrl":"string","DateAdded":"0001-01-01T00:00:00","PublisherName":"Simon \u0026 Schuster","AuthorNames":["George R.R. Martin"]},{"Id":9,"Title":"em chua 18 anh oi","Description":"string","IsRead":true,"DateRead":"2025-10-07T08:52:36.836","Rate":4,"Genre":"string","CoverUrl":"string","DateAdded":"0001-01-01T00:00:00","PublisherName":"Penguin Random House","AuthorNames":["J.K. Rowling"]},{"Id":10,"Title":"stringstri","Description":"string","IsRead":true,"DateRead":"2025-10-08T00:51:41","Rate":0,"Genre":"string","CoverUrl":"https://nads.1cdn.vn/2024/11/22/74da3f39-759b-4f08-8850-4c8f2937e81a-1_mangeshdes.png","DateAdded":"0001-01-01T00:00:00","PublisherName":"Penguin Random House","AuthorNames":["Agatha Christie"]},{"Id":11,"Title":"dewfewgfwergrg","Description":"h\u1ECFi l\u00E0m cc g\u00EC","IsRead":true,"DateRead":"2025-10-01T00:00:00","Rate":3,"Genre":"kinh d\u1ECB","CoverUrl":"xsacdscfedsvcfeds","DateAdded":"0001-01-01T00:00:00","PublisherName":"HarperCollins","AuthorNames":["Stephen King"]},{"Id":12,"Title":"fuyfcyiufuyf","Description":"h\u1ECFi l\u00E0m cc g\u00EC","IsRead":true,"DateRead":"2025-10-01T00:00:00","Rate":4,"Genre":"kinh d\u1ECB","CoverUrl":"https://i.pinimg.com/564x/72/f4/32/72f432c765e6df59daaf6aeff3ee4e9e.jpg","DateAdded":"0001-01-01T00:00:00","PublisherName":"Hachette Livre","AuthorNames":["George R.R. Martin"]}]
2025-10-08 18:43:21.283 +07:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[WebAPI.Models.DTO.BookWithAuthorAndPublisherDTO, WebAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-08 18:43:21.284 +07:00 [INF] Executed action WebAPI.Controllers.BooksController.GetAll (WebAPI) in 17.042ms
2025-10-08 18:43:21.286 +07:00 [INF] Executed endpoint 'WebAPI.Controllers.BooksController.GetAll (WebAPI)'
2025-10-08 18:43:21.287 +07:00 [INF] Request finished HTTP/2 GET https://localhost:7021/api/Books/get-all-books?pageNumber=1&pageSize=100 - 200 null application/json; charset=utf-8 28.6579ms
2025-10-08 18:43:27.716 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:7021/api/Books/update-book-by-id/6 - application/json 263
2025-10-08 18:43:27.720 +07:00 [INF] Executing endpoint 'WebAPI.Controllers.BooksController.UpdateBookById (WebAPI)'
2025-10-08 18:43:27.721 +07:00 [INF] Route matched with {action = "UpdateBookById", controller = "Books"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult UpdateBookById(Int32, WebAPI.Models.DTO.AddBookRequestDTO) on controller WebAPI.Controllers.BooksController (WebAPI).
2025-10-08 18:43:27.730 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[CoverUrl], [b].[DateAdded], [b].[DateRead], [b].[Description], [b].[Genre], [b].[IsRead], [b].[PublisherID], [b].[Rate], [b].[Title]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2025-10-08 18:43:27.740 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__bookDTO_PublisherID_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Publishers] AS [p]
        WHERE [p].[Id] = @__bookDTO_PublisherID_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-08 18:43:27.747 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__authorId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Authors] AS [a]
        WHERE [a].[Id] = @__authorId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-10-08 18:43:27.756 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AuthorId], [b].[BookId]
FROM [Books_Authors] AS [b]
WHERE [b].[BookId] = @__id_0
2025-10-08 18:43:27.766 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Books_Authors]
OUTPUT 1
WHERE [Id] = @p0;
2025-10-08 18:43:27.775 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Books_Authors] ([AuthorId], [BookId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-10-08 18:43:27.778 +07:00 [INF] Executing OkObjectResult, writing value of type 'WebAPI.Models.DTO.AddBookRequestDTO'.
2025-10-08 18:43:27.780 +07:00 [INF] Executed action WebAPI.Controllers.BooksController.UpdateBookById (WebAPI) in 57.4538ms
2025-10-08 18:43:27.781 +07:00 [INF] Executed endpoint 'WebAPI.Controllers.BooksController.UpdateBookById (WebAPI)'
2025-10-08 18:43:27.782 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:7021/api/Books/update-book-by-id/6 - 200 null application/json; charset=utf-8 65.7428ms
